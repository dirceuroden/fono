<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">

    <ui:composition template="/layout/template.xhtml">
    	<ui:define name="pageTitle"><h:outputText value="Resumo por cliente" /></ui:define>
    	
		<ui:define name="content">
		
			<h:panelGroup rendered="#{statusMB.panel == 'lista'}">
		
				<div style="border-bottom: 1px solid #E5E5E5;">
					<h3><h:outputText value="Status Impressora" />
						<small> <h:outputText value="lista" /></small></h3>
				</div>
				
				<h:form>
					<h:dataTable value="#{statusMB.impressoras}" var="impressora" styleClass="table table-hover">
		                <h:column>
							<f:facet name="header"><h:outputText value="Impressora" /></f:facet>
							<h:commandLink action="#{statusMB.listarInfo}" value="#{impressora.id}" title="Clique para listar informações.">
	                			<f:setPropertyActionListener target="#{statusMB.idSelecionado}" value="#{impressora.id}" />
	            			</h:commandLink>
		                </h:column>
		                
		                <h:column>
							<f:facet name="header"><h:outputText value="Template" /></f:facet>
							<h:outputText value="#{impressora.template}" converter="br.com.controleimpressoras.converter.TemplateSnmpConverter"/>
		                </h:column>

		                <h:column>
							<f:facet name="header"><h:outputText value="Descrição" /></f:facet>
							<h:outputText value="#{impressora.descricao}" />
		                </h:column>

		                <h:column>
							<f:facet name="header"><h:outputText value="IP" /></f:facet>
							<h:outputText value="#{impressora.ip}" />
		                </h:column>
		                
						<f:facet name="footer">
				          	<div class="btn-group">
								<h:commandButton value="Nova Consula" action="#{statusMB.consultar}" styleClass="btn btn-default" />
				               	<h:commandButton value="Início" action="#{statusMB.pagInicio}" styleClass="btn btn-default" disabled="#{statusMB.impressoraPage == 0}"/>
				               	<h:commandButton value="Anterior" action="#{statusMB.pagAnterior}" styleClass="btn btn-default" disabled="#{statusMB.impressoraPage == 0}"/>
				               	<h:commandButton value="Próximo" action="#{statusMB.pagProximo}" styleClass="btn btn-default" disabled="#{statusMB.impressoraRows != statusMB.impressorasSize}"/>
				               </div>
					    </f:facet>
					</h:dataTable>
					
				</h:form>
				<h:messages />
			</h:panelGroup>
			
			
			<h:panelGroup rendered="#{statusMB.panel == 'locCliente'}">
				<div style="border-bottom: 1px solid #E5E5E5;">
					<h3><h:outputText value="Status Impressora" />
						<small> <h:outputText value="localizar cliente" /></small></h3>
				</div>
				<br/>
				<h:form styleClass="form-horizontal">
				
				    <fieldset>
				    <div class="control-group">
				        <label class="control-label"><h:outputText value="Nome" /></label>
					    <div class="controls">
		        			<h:inputText value="#{statusMB.locCliente.texto}" label="Nome" styleClass="input-large"/>
			    			<h:commandButton value="Listar" action="#{statusMB.locCliente.listar}" styleClass="btn btn-default"/>
			    		</div>
					</div>
					</fieldset>
					<br/>
				
					<h:dataTable value="#{statusMB.locCliente.result}" var="result" styleClass="table table-hover">
						<h:column>
							<f:facet name="header"><h:outputText value="CNPJ" /></f:facet>
							<h:commandLink action="#{statusMB.locCliente.selecionar}" value="#{result.id}" title="Clique para selecionar.">
	                			<f:setPropertyActionListener target="#{statusMB.locCliente.idSelecionado}" value="#{result.id}" />
	            			</h:commandLink>
		                </h:column>
		                
		                <h:column>
							<f:facet name="header"><h:outputText value="Nome" /></f:facet>
							<h:outputText value="#{result.nome}" />
		                </h:column>
		                
					</h:dataTable>

			    </h:form>
			    
			    <h:panelGroup layout="block" class="alert alert-error" rendered="#{facesContext.validationFailed or not empty facesContext.messageList }">
			    	<h:messages showDetail="true" showSummary="false" />
			    </h:panelGroup>
			    
			</h:panelGroup>
			
			<h:panelGroup rendered="#{statusMB.panel == 'info'}">
		
				<div>
					<h3><h:outputText value="Informações da Impressora" />
						<small> <h:outputText value="lista" /></small></h3>
				</div>
				
				<h:form>
				
					<table class="table table-bordered">
						<tr>
							<td><strong><h:outputText value="Cliente" /></strong></td>
							<td><h:outputText value="#{statusMB.impressora.cliente}" converter="br.com.controleimpressoras.converter.ClienteConverter"/></td>
						</tr>
						<tr>
							<td><strong><h:outputText value="Número de Série" /></strong></td>
							<td><h:outputText value="#{statusMB.impressora.id}" /></td>
						</tr>
						<tr>
							<td><strong><h:outputText value="Descrição" /></strong></td>
							<td><h:outputText value="#{statusMB.impressora.descricao}" /></td>
						</tr>
						<tr>
							<td><strong><h:outputText value="Template" /></strong></td>
							<td><h:outputText value="#{statusMB.impressora.template}" converter="br.com.controleimpressoras.converter.TemplateSnmpConverter" /></td>
						</tr>
					</table>
				
				
					<h:dataTable value="#{statusMB.leituras}" var="leitura" styleClass="table table-striped table-bordered">
		                <h:column>
							<f:facet name="header"><h:outputText value="Informação" /></f:facet>
							<h:outputText value="#{leitura.tipoInformacao}" converter="br.com.controleimpressoras.converter.TipoInformacaoConverter"/>
		                </h:column>
		                
		                <h:column>
							<f:facet name="header"><h:outputText value="Data" /></f:facet>
							<h:outputText value="#{leitura.data}">
								<f:convertDateTime timeZone="GMT" pattern="dd/MM/yyyy HH:mm" />
							</h:outputText>
		                </h:column>
		                
		                <h:column>
							<f:facet name="header"><h:outputText value="Valor" /></f:facet>
							<h:outputText value="#{leitura.valor}" />
		                </h:column>
					</h:dataTable>
					
					<div class="control-group">
						<div class="btn-group">
							<h:commandButton action="#{statusMB.voltar}" value="Voltar" styleClass="btn btn-default" />
			    		</div>
			    	</div>
				</h:form>
				<h:messages />
			</h:panelGroup>
			
		</ui:define>
    </ui:composition>
</html>